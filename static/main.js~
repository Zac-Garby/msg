// connects to the websocket server hosted at
// ws://{host}.
function connect() {	
	sock = new WebSocket(`ws://${window.location.host}/ws`)
	
	sock.onopen = function(evt) {
		sock.send(JSON.stringify({
			type: "client-info",
			data: {
				name: "unnamed",
				room: "/",
			},
		}))
	}

	sock.onmessage = function(evt) {
		json = JSON.parse(evt.data)
		onMessage(json)
	}
}

function onMessage(data) {
	console.log(data)
}

function handleKey(evt) {
	if (evt.keyCode === 13) {
		evt.preventDefault()

		sock.send(JSON.stringify({
			type: "chat",
			data: evt.target.value,
		}))

		evt.target.value = ""
	}
}
